<app-header (updateContent)="updateContent($event)"></app-header>
<div class="content" #pRef>
  <div class="row">
    <div class="col-sm-12 d-flex justify-content-start margin-left-custom">
      <div style="width: 950px" class="inline">
        <div class="col-sm-6 d-flex">
          <div class="inline">
            <div class="container-titulo">
              <span class="titulo">Generar Reporte</span>
            </div>
          </div>
        </div>
        
      </div>
    </div>
    <div class="col-sm-12 margin-left-custom">
      <div class="row" style="width:560px">
        <div class="col-sm-6 d-flex justify-content-start ">
          <div class="inline">
           
          </div>
        </div>
  
      <div class="col-sm-6 d-flex justify-content-end">
        <div class="inline">
          
        </div>
        
      </div>
      </div>
    </div>
  <div class="row">
    <div
      class="col-sm-12 d-flex justify-content-center margin-left-custom"
      style="overflow-x: auto;width: 800px !important;"
    >
      <div class="row">
        <div class="col-sm-6">
         <div class="row">
          <div class="col-sm-12">
              <app-input-form
              [typeComponent]="'input'"
              [typed]="'text'"
              [label]="'Número de factura'"
              [placeholder]="'Ingrese el numero de factura'"
              [name]="'idFactura'"
              (updateValue)="updateInputs($event)"
              [isRequired]="true"
            ></app-input-form>
          </div>
          <div class="col-sm-12">
            <app-input-form
            [typeComponent]="'input'"
            [typed]="'text'"
            [label]="'Nombre del embarcador'"
            [placeholder]="'Ingrese el nombre del embarcador'"
            [name]="'nombreEmbarcador'"
            (updateValue)="updateInputs($event)"
            [isRequired]="true"
          ></app-input-form>
        </div>
          
        <div class="col-sm-12">
          <app-input-form
          [typeComponent]="'input'"
          [typed]="'text'"
          [label]="'Total Factura'"
          [placeholder]="'Ingrese el total de la factura'"
          [name]="'totalFactura'"
          (updateValue)="updateInputs($event)"
          [isRequired]="false"
        ></app-input-form>
      </div>
      <div class="col-sm-12">
        <mat-form-field appearance="fill" class="ucr-form-field">
          <mat-label >Clientes<span class="ucr-required"> *</span></mat-label
          >
          <mat-select
            placeholder="Seleccione un cliente"
            [formControl]="clienteCtrl"
            (selectionChange)="updateSelectClientes($event)"
            
            #singleSelect
          >
          <mat-option>
            <ngx-mat-select-search [formControl]="clienteFilterCtrl"></ngx-mat-select-search>
          </mat-option>
            <mat-option *ngFor="let item of filteredClientes | async" value="{{ item.nombreEmpresa }}">{{
              item.nombreEmpresa
            }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
        <div class="col-sm-12">
          <app-input-form
          [typeComponent]="'input'"
          [typed]="'text'"
          [label]="'Cliente Seleccionado'"
          [placeholder]="'Empresa'"
          [name]="'cliente'"
          (updateValue)="updateInputs($event)"
          [isRequired]="true"
          [isDisabled]="true"
          [value]="inputvalue+''"
          #inputCliente
        ></app-input-form>
      </div>
        <div class="col-sm-12">
          <app-input-form
          [typeComponent]="'input'"
          [typed]="'text'"
          [label]="'Número Teléfonico'"
          [placeholder]="'Ingrese el Número Teléfonico del consignatario'"
          [name]="'telefono'"
          (updateValue)="updateInputs($event)"
          [isRequired]="true"
          [isDisabled]="true"
          #telefono
        ></app-input-form>
      </div>
      <div class="col-sm-12">
        <app-input-form
        [typeComponent]="'input'"
        [typed]="'text'"
        [label]="'Dirección de Consignatario'"
        [placeholder]="'Ingrese la Dirección consignatario'"
        [name]="'direccion'"
        (updateValue)="updateInputs($event)"
        [isRequired]="true"
        [isDisabled]="true"
        #direccion
      ></app-input-form>
    </div>
         </div>
        </div>
        <div class="col-sm-6">
          <div class="row">
                <div class="col-sm-12">
                  <app-input-form
                  [typeComponent]="'select'"
                  [label]="'Tipo de tasa'"
                  [items]="[
                    { name: 'Terrestre' },
                    { name: 'Marítimo' }
                  ]"
                  [name]="'typeTasa'"
                  [placeholder]="'Seleccione informacion'"
                  (updateValue)="updateInputs($event)"
                  [value]="'10'"
                ></app-input-form>
              </div>
              <div class="col-sm-12">
                <app-input-form
                [typeComponent]="'input'"
                [typed]="'text'"
                [label]="'Flete'"
                [placeholder]="'Ingrese el flete'"
                [name]="'flete'"
                (updateValue)="updateInputs($event)"
                [isRequired]="true"
              ></app-input-form>
            </div>
              <div class="col-sm-12">
                <app-input-form
                [typeComponent]="'input'"
                [typed]="'text'"
                [label]="'Otros'"
                [placeholder]="'Ingrese otro valor'"
                [name]="'otros'"
                (updateValue)="updateInputs($event)"
                [isRequired]="false"
              ></app-input-form>
            </div>
              <div class="col-sm-12">
                <app-input-form
                [typeComponent]="'input'"
                [typed]="'text'"
                [label]="'Nombre del Consignatario'"
                [placeholder]="'Ingrese el nombre completo del consignatario'"
                [name]="'nombre'"
                (updateValue)="updateInputs($event)"
                [isRequired]="true"
                [isDisabled]="true"
                #nombre
              ></app-input-form>
            </div>
              <div class="col-sm-12">
                <app-input-form
                [typeComponent]="'input'"
                [typed]="'text'"
                [label]="'Correo del Consignatario'"
                [placeholder]="'Ingrese el correo del consignatario'"
                [name]="'correo'"
                (updateValue)="updateInputs($event)"
                [isRequired]="true"
                [isDisabled]="true"
                #correo
              ></app-input-form>
            </div>
           
          </div>
        </div>
        <div class="col-sm-12">
            <div class="row" style="padding-top: 20px;border-top: 1px solid #4b4646;">
              <div class="col-sm-12">
                <mat-form-field appearance="fill" class="ucr-form-field">
                  <mat-label >Productos<span class="ucr-required"> *</span></mat-label
                  >
                  <mat-select
                    placeholder="Seleccione un cliente"
                    [formControl]="productosCtrl"
                    (selectionChange)="updateSelectProductos($event)"
                    (click)="updateShow()"
                    #singleSelect2
                  >
                  <mat-option>
                    <ngx-mat-select-search [formControl]="productosFilterCtrl"></ngx-mat-select-search>
                  </mat-option>
                    <mat-option *ngFor="let item of filteredProductos | async" value="{{ item.descripcion }}">{{
                      item.descripcion
                    }}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-sm-12">
                
                <app-input-form
                  [typeComponent]="'input'"
                  [typed]="'text'"
                  [label]="'Producto Seleccionado'"
                  [placeholder]="'Producto seleccionado'"
                  [name]="'producto'"
                  (updateValue)="updateInputs($event)"
                  [isRequired]="true"
                  [isDisabled]="true"
                  [value]="inputvalue2+''"
                  #inputProducto
                ></app-input-form>
              </div>
              <div class="col-sm-6">
                <app-input-form
                  [typeComponent]="'input'"
                  [typed]="'text'"
                  [label]="'Cantidad'"
                  [placeholder]="'Ingrese la cantidad'"
                  [name]="'cantidad'"
                  (updateValue)="updateInputs($event)"
                  [isRequired]="true"
                  #cantidad
                ></app-input-form>
              </div>
              <div class="col-sm-6">
                
                <app-input-form
                  [typeComponent]="'input'"
                  [typed]="'text'"
                  [label]="'Bultos'"
                  [placeholder]="'Ingrese la cantidad de bultos'"
                  [name]="'Bultos'"
                  (updateValue)="updateInputs($event)"
                  [isRequired]="true"
                  #bultos
                ></app-input-form>
              </div>
              <div class="col-sm-6">
                <app-input-form
                  [typeComponent]="'input'"
                  [typed]="'text'"
                  [label]="'Fob'"
                  [placeholder]="'Ingrese el fob'"
                  [name]="'fob'"
                  (updateValue)="updateInputs($event)"
                  [isRequired]="true"
                  #cantidad
                ></app-input-form>
              </div>
              <div class="col-sm-12 justify-content-end">
                <button
                  class="btn btn-primary btn-margin"
                  (click)="addProduct()"
                  matTooltip="Agregar producto"
                  matTooltipPosition="right"
                  aria-label="Button that displays a tooltip when focused or hovered over"
                >
                  <i class="fas fa-plus"></i>
                </button>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-12">
                <table style="width:100%">
                  <thead>
                    <tr>
                      <th>Producto</th>
                      <th>Cantidad</th>
                      <th style="width:85px">Peso Bruto</th>
                      <th style="width:85px">Peso Neto</th>
                      <th>Bultos</th>
                      <th style="width:85px">Total Peso</th>
                      <th></th>
                    </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let element of productosSeleccionados;let i = index;">
                    <td>{{element.descripcion}}</td>
                    <td>{{element.cantidad}}</td>
                    <td style="width:85px">{{element.peso_bruto}}</td>
                    <td style="width:85px">{{element.peso_neto}}</td>
                    <td>{{element.bultos}}</td>
                    <td style="width:85px">{{decimalPipe.transform(element.total,"1.0-2")}}</td>
                    <td><button (click)="removeItem(i)" class="btn btn-danger"><i class="fa fa-trash"></i></button></td>
                  </tr>
                  <tr>
                    <td>Total</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td>{{decimalPipe.transform(totalBruto,"1.0-2")}}</td>
                  </tr>
                </tbody>
                  
                </table>
              </div>
              <div class="col-sm-12">
                <table style="width:100%">
                  <thead>
                    <tr>
                      <th>Producto</th>
                      <th>Flete</th>
                      <th>Seguro</th>
                      <th>Fob</th>
                      <th>Otros</th>
                     
                    </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let element of productosSeleccionados;let i = index;">
                    <td>${{element.descripcion}}</td>
                    <td>${{decimalPipe.transform(element.flete,"1.0-2")}}</td>
                    <td>${{decimalPipe.transform(element.seguro,"1.0-2")}}</td>
                    <td>${{decimalPipe.transform(element.fob,"1.0-2")}}</td>
                    <td>${{decimalPipe.transform(element.otros,"1.0-2")}}</td>
                  </tr>
                  <tr>
                    <td>Total</td>
                    <td>${{ decimalPipe.transform(totalFlete,"1.0-2")}}</td>
                    <td>${{ decimalPipe.transform(totalSeguro,"1.0-2")}}</td>
                    <td>${{ decimalPipe.transform(totalFob,"1.0-2")}}</td>
                    <td>${{ decimalPipe.transform(totalOtros,"1.0-2")}}</td>
                  </tr>
                </tbody>
                  
                </table>
              </div>
            </div>
            
            <div class="row">
              <div class="col-sm-12">
                <button
                  class="btn btn-danger"
                  style="margin-left: 5px;"
                  matTooltip="Imprimir Reporte"
                  matTooltipPosition="right"
                  aria-label="Button that displays a tooltip when focused or hovered over"
                  (click)="
                    save()
                  "
                >
                  <i class="fas fa-file-pdf"></i> Imprimir
                </button>
              </div>
            </div>
        </div>
      </div>
    </div>
  </div>
  </div>
</div>
<app-footer #footer></app-footer>
<ngx-spinner
  bdColor="rgba(0, 0, 0, 0.8)"
  size="medium"
  color="#ffffff"
  type="ball-clip-rotate"
  [fullScreen]="true"
  ><p style="color: white">Cargando...</p></ngx-spinner
>